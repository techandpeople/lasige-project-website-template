---
import { getCollection } from 'astro:content';
import { getLocalizedEntries } from '../i18n';
import FunderCard from './FunderCard.astro';

interface Props {
	lang: string;
	siteConfig: Record<string, any>;
}

const { lang, siteConfig } = Astro.props;
const allFunders = await getCollection('funders');
const funders = getLocalizedEntries(allFunders, lang);
const sorted = [...funders].sort((a, b) => a.data.order - b.data.order);
const title = siteConfig.funding?.title || 'Funding';
const description = siteConfig.funding?.description;
---
{sorted.length > 0 && (
	<section id="funding" aria-labelledby="funding-heading" class="py-20 min-h-screen flex flex-col justify-center bg-surface">
		<div class="max-w-6xl mx-auto px-4">
			<h2 id="funding-heading" class="text-3xl md:text-4xl font-bold text-primary mb-4 text-center">
				{title}
			</h2>
			<div class="w-16 h-1 bg-accent mx-auto mb-8 rounded-full"></div>

			{description && (
				<p class="text-muted text-lg text-center mb-12">{description}</p>
			)}

			<div class="flex flex-wrap justify-center gap-8">
				{sorted.map((entry) => (
					<FunderCard funder={entry.data} />
				))}
			</div>
		</div>
	</section>
)}
